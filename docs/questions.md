## 【比特币0.2.10源码分析】比特币的一些疑惑
### [目录](../README.md)
### [项目地址](https://github.com/lijinchao2007/bitcoin_0_2_10)

### 4年减半的实现
```
    出块的收益计算公式为：
    GetBlockValue为(50 * COIN) >> (nBestHeight / 210000)，210000次大概是4年，所以4年减半，最终为0.
```
### 挖矿难度的如何控制？何为工作量证明？
```
    更多可了解[【比特币0.2.10源码分析】挖矿过程](./minner.md)
```
### 奖励机制如何获取手续费？
```
    更多可了解[【比特币0.2.10源码分析】挖矿过程](./minner.md)
```
### 为何10分钟出一块？为何一块要限制大小？为何比特币交易速度限制在一秒几笔？
```
    出块的时候，限定了可包含交易记录的大小不能超出MAX_SIZE/2，大概是是1M（这个版本貌似是32/2=16M?）
    大概是两千笔交易记录。所以一秒钟平均大概三四笔交易的速度。
    交易速度的快慢，由出块速度和出块大小限制。
    而区块的同步到全网的时间，又跟区块的大小有关。
    有研究表明，当前比特币同步全网大概是12s，中位数6m，越大越慢。
    而同步慢的后果，会导致节点的不可信，降低算力攻击的难度。
    理论上是51%才能颠覆共识，会因为网络同步的缓慢，而降到更低的阈值。
    新的一些币种，都在降低出块时间，加大块的上限；以实现加速交易的目的
    更多可了解[【比特币0.2.10源码分析】挖矿过程](./minner.md)
```
### 为何需要6次确认？Coinbase的120次成熟时间？
```
    6次确认是区块有6个以上子块，才当做这个区块的交易被确认。
    之所以有这个机制，是区块分叉高度为6的可能性很低，几乎可以认定不可能通过算力攻击推翻这次交易。

    Coinbase的120次成熟，是指挖到的比特币，不能在6次确认后，马上使用，必须等到120次确认之后，方可使用。
    原因是coinbase一旦发生交易，如果因为分叉的原因，需要撤销coinbase之后的所有交易，对整个区块链将是不可接受的。
    想想一下你的收到的钱忽然不翼而飞，而且还无法要求转账的人继续转账，因为最早转账的人（coinbase）也没有钱了！！
    所以限定在120次确认coinbase才可交易，就是为了避免这种情况的发生。
    出现120高度的分叉，可能性就更小了。

```
### 比特币2020年的算力分布情况如何？
```
H/s ： 是最小的单位，每秒做一次计算机随机的hash碰撞，就叫做Hash/s 单位简写成 H/s
KH/s : 1KH/s=1000H/s  通常 K=千的意思，每秒1,000次哈希
MH/s ：1MH/s=1000KH/s  M是兆，1M=1000千 ，1MH/s=每秒1,000,000次哈希
GH/s：1GH/s =1000MH/s 每秒1,000,000,000次哈希。
TH/s ：1 TH/s =1000GH/s  每秒1,000,000,000,000次哈希。
PH/s：1 PH/s =1000TH/s 每秒1,000,000,000,000,000次哈希。
EH/s：1 EH/s =1000PH/s 每秒1,000,000,000,000,000,000次哈希。

比特币全网算力在20年10月的时候，大概100eh/s=100000PH/s,比特大陆的矿池算力大概是20eh/s,占全网的五分之一。
我的mac大概10万h/s
1台蚂蚁矿机S9，1320W，13.5TH/S，大概占全网算力百万分之一。而是普通电脑的一亿倍。
所以普通电脑想挖矿等于痴人说梦。

```
### 出块时间为何不是准确的10分钟，而是平均10分钟？
```
    尤其需要注意的是，hash计算有很强的随机性，运气好很快，不好的时候会很久。
    10分钟出块的限定，只是按概率统计的平均值，虽然极端情况很少，但也会有。
    历史中，就有多次比特币几个小时才出块的情况发生，交易会临时积压，
    更多可了解[【比特币0.2.10源码分析】挖矿过程](./minner.md)
```
### 比特币2020年的市值与单价？
```
20年10月的单价为10,582.5美元，流通总量18.51百万，总市值195.81十亿。
```

### 双花交易
```
作者：Ke Jiang
链接：https://zhuanlan.zhihu.com/p/25692826
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
对于双花问题，比特币网络，或者说区块链网络，是这么应对的：-每笔交易都需要先确认对应比特币之前的状态，如果它之前已经被标记为花掉，那么新的交易会被拒绝。
-如果先发起一笔交易，在它被确认前，也就是这个时间段的交易还未被记账成区块block时，进行矛盾的第二笔交易，那么在记账时，这些交易会被拒绝。-上面只是小伎俩，现在tricky的部分开始了。如果诈骗者刻意把第一笔交易向一半网络进行广播，把第二笔交易向另一半网络广播——这个诈骗者智商还挺高——然后两边正好有两个矿工几乎同时取得记账权，把各自记的block发布给大家的话（这个概率很低），网络是不是会混乱呢，区块链的规则是这样的：先选择任意一个账本都可以，这时候原来统一的账本出现了分叉：但是在两个账本中各只有一笔交易，诈骗者不会有好处。接下来，下一个矿工选择在A基础上继续记账的话，A分支就会比B分支更长，根据区块链的规则，最长的分支会被认可，短的分支会被放弃，账本还是会回归为一个，交易也只有一笔有效：-那么如果这个诈骗犯真的智商非常高，他会这么做：如果是A分支被认可（B也一样），相应交易确认，拿到商品之后，立刻自己变身矿工，争取到连续两次记账权，然后在B分支上连加两个block，就像这样：
于是B分支成为认可的分支，A被舍弃，A分支中的交易不再成立，但他已经拿到商品，诈骗成功。
在B分支落后的情况下要强行让它超过A分支，其实是挺难的，假设诈骗者掌握了全网1%的计算能力，那么他争取到记账权的概率就是1%，两次就是10的负4次方。但这个概率还没有太低。
应对办法呢？建议大家在一笔交易确认后，也就是一个block被记下来之后，再等5个block，也就是等6个block被确认后再把交易对应的商品交付。这样，诈骗者还能追上的概率就几乎为0了。除非……如果诈骗者掌握了全网50%以上的计算力，那么，即使落后很多，他追上也只是时间问题，这就是比特币的“51%攻击”。这就是区块链需要警惕的问题。虽然在比特币网络中，用户已经极多，全网算力总和非常大，如果真掌握50%以上，也不用靠这个诈骗了，挖矿的收益都更高。但是在小的区块链网络中呢？况且，没有50%以上的算力，还是有机会成功的，只是概率低而已。不知道神龙见首不见尾的中本聪，会不会重现江湖，再一次惊艳世界。
```